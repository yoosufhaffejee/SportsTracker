<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Padel Â· Sports Tracker</title>
    <link rel="icon" href="./assets/logo.svg" />
    <link rel="stylesheet" href="./css/styles.css" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script type="module" src="./js/pages/sportPage.js"></script>
    <script type="module">import { initTabs } from './js/ui/tabs.js'; document.addEventListener('DOMContentLoaded', initTabs);</script>
  </head>
  <body data-sport="padel">
    <header class="app-header">
      <div class="brand">
        <img src="./assets/logo.svg" alt="Sports Tracker" class="logo" />
        <h1>Padel</h1>
      </div>
      <div class="header-actions">
        <button id="themeToggle" aria-label="Toggle dark mode">ðŸŒ™</button>
        <div id="userPanel" class="user-panel hidden">
          <img id="userAvatar" class="avatar" alt="User avatar" />
          <span id="userName"></span>
          <button id="signOutBtn" class="secondary">Sign out</button>
        </div>
      </div>
    </header>

    <main class="container">
      <div class="page-nav">
        <a href="./index.html">Back</a>
      </div>
      <section>
        <div class="tab-row">
          <div class="tab active" data-tab="friendlies">Friendlies</div>
          <div class="tab" data-tab="tournaments">Tournaments</div>
          <div class="tab" data-tab="teams">Teams</div>
          <div class="tab" data-tab="players">Players</div>
          <div class="tab" data-tab="progression">Player Progression</div>
        </div>
        <div id="tab-friendlies" class="tab-panel active">
          <div class="card">
            <h3>Friendlies</h3>
            <form id="friendlyForm" class="grid two">
              <div class="row"><label for="friendlyTeamA">Team A <span class="req">*</span></label><input id="friendlyTeamA" required /></div>
              <div class="row"><label for="friendlyTeamB">Team B <span class="req">*</span></label><input id="friendlyTeamB" required /></div>
              <div class="row"><label for="friendlyScoreA">Score A</label><input id="friendlyScoreA" type="number" min="0" /></div>
              <div class="row"><label for="friendlyScoreB">Score B</label><input id="friendlyScoreB" type="number" min="0" /></div>
              <div class="row" style="grid-column:1/-1; display:flex; align-items:center; gap:.5rem;"><button id="friendlySubmitBtn" type="submit">Save</button><button id="friendlyClearBtn" type="button" class="secondary hidden">Clear</button><span id="friendlyMsg" class="muted"></span></div>
            </form>
            <div class="card" style="margin-top:.75rem;">
              <h5>Recent Friendlies</h5>
              <ul id="friendlyList" class="item-list"></ul>
            </div>
          </div>
        </div>
        <div id="tab-tournaments" class="tab-panel">
          <div class="card">
            <h3>Tournaments</h3>
            <form id="tournamentAccessForm" class="tournament-form">
              <div class="row" style="align-self:start;">
                <label for="tAction">Action <span class="req">*</span></label>
                <select id="tAction" required>
                  <option value="create">Create</option>
                  <option value="join">Join</option>
                </select>
              </div>
              <div id="tActionCreateFields">
                <div class="row">
                  <label for="tName">Tournament Name <span class="req">*</span></label>
                  <input id="tName" placeholder="e.g. Autumn League" required />
                </div>
                <div class="row">
                  <label for="tFormat">Format <span class="req">*</span></label>
                  <select id="tFormat" required>
                    <option value="league">League</option>
                    <option value="knockout">Knockout</option>
                    <option value="groups_knockout">Group + Knockout</option>
                  </select>
                </div>
                <div class="row" style="align-items:center;">
                  <label for="tPublic">Public?</label>
                  <input id="tPublic" type="checkbox" />
                </div>
                <div class="row" id="tEncountersRow" hidden>
                  <label for="tEncounters" id="tEncountersLabel">Encounters <span class="req">*</span></label>
                  <select id="tEncounters" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                  </select>
                </div>
              </div>
              <div id="tActionJoinFields" hidden>
                <div class="row">
                  <label for="joinCode">Tournament Code <span class="req">*</span></label>
                  <input id="joinCode" required />
                </div>
                <div class="row">
                  <label for="joinRole">Role <span class="req">*</span></label>
                  <select id="joinRole" required>
                    <option value="spectator">Spectator</option>
                    <option value="captain">Team Captain</option>
                  </select>
                </div>
                <div class="row" id="teamNameRow" hidden>
                  <label for="teamName">Team Name <span class="req">*</span></label>
                  <input id="teamName" />
                </div>
              </div>
              <div class="row" style="grid-column:1/-1; display:flex; align-items:center; gap:.5rem;">
                <button type="submit">Save</button>
                <button type="button" id="tAccessClearBtn" class="secondary">Clear</button>
                <span id="tournamentAccessMsg" class="muted"></span>
              </div>
            </form>
            <div class="card" style="margin-top:.75rem;"><h5>My Tournaments</h5><ul id="myTournaments" class="list"></ul></div>
          </div>
        </div>
        <div id="tab-teams" class="tab-panel">
          <div class="card"><h3>Teams</h3>
            <form id="teamForm" class="grid two">
              <input type="hidden" id="teamEditingId" />
              <div class="row"><label for="teamNameInput">Team Name <span class="req">*</span></label><input id="teamNameInput" required /></div>
              <div class="row" style="grid-column:1/-1; display:flex; gap:.5rem; align-items:center;">
                <button type="submit" id="teamSubmitBtn">Save Team</button>
                <button type="button" id="teamClearBtn" class="secondary hidden">Clear</button>
                <span id="teamMsg" class="muted"></span>
              </div>
            </form>
            <div class="card" style="margin-top:.75rem;"><h5>My Teams</h5><ul id="teamList" class="item-list"></ul></div>
          </div>
        </div>
        <div id="tab-players" class="tab-panel">
          <div class="card"><h3>Players (Padel)</h3>
            <form id="sportPlayerExtraForm" class="grid two">
              <div class="row"><label for="spPlayerSelect">Player</label><select id="spPlayerSelect"></select></div>
              <div class="row"><label for="playerPosition">Primary Position</label><input id="playerPosition" placeholder="e.g. Left" /></div>
              <div class="row"><label for="playerAltPositions">Alt Positions (comma)</label><input id="playerAltPositions" placeholder="e.g. Right" /></div>
              <div class="row" style="grid-column:1/-1;"><button type="submit">Save Info</button><span id="playerExtraMsg" class="muted"></span></div>
            </form>
            <div class="card" style="margin-top:.75rem;"><h5>Player Sport Info</h5><ul id="playerExtraList" class="item-list"></ul></div>
          </div>
        </div>
        <div id="tab-progression" class="tab-panel">
          <div class="card"><h3>Player Progression</h3>
            <div class="row"><label for="sportPlayerSelect">Select Player</label><select id="sportPlayerSelect"></select></div>
            <div id="sportRatingControls" class="ratings"></div>
            <div class="chart-wrap"><canvas id="sportProgressionRadar" height="240"></canvas></div>
            <p id="sportOverallScore" class="muted"></p>
            <div class="card"><h5>History</h5><table id="sportProgressionTable" style="width:100%"><thead><tr><th>Date</th><th>Overall</th></tr></thead><tbody></tbody></table></div>
          </div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <small>Â© <span id="year"></span> Sports Tracker</small>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();
      });
    </script>
  </body>
</html>
